add_library(sdm SHARED
    sdm.cpp
    kernels.cpp
    kernel_projection.cpp
)
target_link_libraries(sdm
    ${NPDIVS_LIBRARIES}
    ${LIBSVM_LIBRARIES}
    ${Boost_LIBRARIES}
    ${BLAS_LIBRARIES}
    ${LAPACK_LIBRARIES}
)

install(
    TARGETS sdm
    EXPORT SDMLibraryDepends
    RUNTIME DESTINATION "${INSTALL_BIN_DIR}" COMPONENT bin
    LIBRARY DESTINATION "${INSTALL_LIB_DIR}" COMPONENT shlib
    ARCHIVE DESTINATION "${INSTALL_LIB_DIR}" COMPONENT lib
    PUBLIC_HEADER DESTINATION "${INSTALL_INCLUDE_DIR}/sdm" COMPONENT dev
)

install(
    DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}"
    DESTINATION "${INSTALL_INCLUDE_DIR}/sdm"
    COMPONENT dev
    FILES_MATCHING PATTERN "*.hpp"
)
